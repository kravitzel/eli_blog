{
  "hash": "f65eea5c67d8947a8c3e5a20ad81576b",
  "result": {
    "markdown": "---\ntitle: \"LLM Aided Webscraping\"\nsubtitle: \"Retreival Augment Generation\"\nauthor: \"Eli Kravitz\"\ndate: \"2023-08-04\"\nformat: html\neditor: visual\nengine: knitr\n---\n\n\n## Introduction\n\n[Small Business Development Centers](https://www.sba.gov/local-assistance/resource-partners/small-business-development-centers-sbdc \"Small Business Administration's SBDC page\") (SBDCs) provide counseling and resources to entrepreneurs and small business owners. SBDCs are typically funded by federal, state, and local governments and partnerships with educational institutions, economic development agencies, and private organizations. The primary goal of SBDCs\n\nis to support the growth and development of small businesses in their communities.\n\nWe were ask to compile a comprehensive list of SBDCs. Additionally, we were required to outline the specific services offered by each SBDC (such as business counseling, tax assistance, etc.) and provide details about the staff ar each center.\n\n## The Pivot to AI\n\nFinding a list of all SBDCs was straightforward; they can be scraped from the [Find Your SBDC tool](https://americassbdc.org/find-your-sbdc/ \"America's SBDC Find Your SBDC tool\") provided by America's SBDC. We found over 700 SBDCs using this tool, each with their own unique website. Manually going through each page is not feasible. Our original plan to extract relevant information with XPath or CSS selectors was not possible. SBDC websites are not standardized. Building selectors that generally work over such a wide variety of websites is impossible.\n\nFor each of the 700+ SBDC websites we use Python's [Beautiful Soup](https://www.crummy.com/software/BeautifulSoup/bs4/doc/ \"Beautiful Soup homepage\") library to retrieve the text from every subpage of the SBDC's website. Ideally, we would provide all this text to ChatGPT API as context in a prompt then ask ChatGPT to retrieve the staff and services for us. GPT-4 has a 8194 token limit (â‰ˆ3000 words) which includes the response from GPT-4. We limit our context to 3000 tokens to leave tokens remaining for our prompt and answer.\n\nThis approach is adapted from [webcrawler notebook](https://github.com/openai/openai-cookbook/blob/main/apps/web-crawl-q-and-a/web-qa.ipynb \"Webcrawler Jupyter Notebook\") from the [OpenAI Cookbook](https://github.com/openai/openai-cookbook \"OpenAI Cookbook\").\n\n## Webscraping\n\n\nAs an example, I'm showing text scraped from the SBDC website for [Tyler, TX](https://tylersbdc.com/ \"Tyler, Texas SBDC homepage\") and every sub-page of the main URL. Results are stored in a `pandas.DataFrame`.\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\nimport pandas as pd\nimport numpy as np\n\ndf = pd.read_csv(\"processed/scraped.csv\", index_col=None, header=0)\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"url\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"text\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"https://tylersbdc.com/\",\"2\":\"Tyler Small Business Development Center | Tyler, TX Follow Us x a ! 903-510-2975 Directions Contact us to get the leverage your business needs today Fill out our assessment and get started today! We Are Now Open Contact Us X Want to stay in the know? Join our mailing list to receive emails with helpful resources and information on our upcoming events! Continue to Website Join Our Mailing List Free Business Advising Business Classes Tyler SBDC We're all about business on all levels. Whether you are an existing business in need of expansion and further development, additional training, or research capabilities; or a start-up in need of a business plan and preparation of paperwork for SBA loan lenders in your area, we can help you plan and prepare. The Tyler SBDC is a partnership program working with the U.S. Small Business Administration (SBA), the State of Texas, and Tyler Junior College to provide small businesses with the practical assistance needed to survive, grow, and prosper in our seven county service area of Smith, Wood, Cherokee, Nacogdoches, Shelby, Sabine, and San Augustine. Contact Us Join Our Mailing List Start-up Business Assessment Existing Business Assessment SizeUp 2022 Small Business Credit Survey\\\"\"},{\"1\":\"https://tylersbdc.com/about-us\",\"2\":\"About Us | Tyler Small Business Development Center Follow Us x a ! 903-510-2975 Directions Who We Are The SBDC is a partnership program with the U.S. Small Business Administration. The SBDC is designed to provide small businesses with the practical assistance needed to survive, grow, and prosper. The SBDC program is part of a nationwide system that links the resources of federal, state, and local government to those of colleges, universities, and the private sector to meet the specialized needs of small businesses. Advising and other services are provided by qualified professionals. Don Proudfoot SBDC Director Kay Bookout SBDC Staff Coordinator/Research Assistant Brad Gottshalk Business Advisor Where We Serve County Service Area How We Can Help You In your first meeting, a counselor will make an assessment of your needs and discuss options available to meet those needs. Further discussion and/or on-site visits by the adviser help define your plans and pinpoint a strategy to achieve them. For your appointment or research request, please download & fill out the required forms below as well as taking the Assessment Survey to save valuable time during your appointment. Form 641/Counseling Form & Client Agreement Return forms via email to kboo@tjc.edu, or fax to 903-510-2978. Reasonable accommodations for persons with disabilities and Limited English Proficiency (LEP) will be made if requested at least two weeks in advance. Start-up Business Assessment Existing Business Assessment'\"},{\"1\":\"https://tylersbdc.com/blog\",\"2\":\"Blog | Tyler Small Business Development Center Follow Us x a ! Home Services Business Advice Classes FAQs Events Success Stories About Us Blog SizeUp Contact Us 903-510-2975 Directions U.S. Small Business Administration Blog Click the photo to stay up to date on the latest information Home Services Business Advice Classes FAQs Events Success Stories About Us Blog SizeUp Contact Us Copyright  2023 Tyler Small Business Development Center, all rights reserved. 1530 SSW Loop 323, Ste 100, Tyler , TX 75701 (903) 510-2975'\"},{\"1\":\"https://tylersbdc.com/business-advice\",\"2\":\"Business Advice | Tyler Small Business Development Center Follow Us x a ! 903-510-2975 Directions Business Advising The SBDC offers free one-on-one advising for start-up and existing businesses in the retail, wholesale, manufacturing, and service industries. Our Advisors can help you  Prepare financial projections for loan package  Conduct financial analysis and improve profitability  Develop competitive strategies  Cope with government regulation and taxes  Design a marketing plan  Understand and secure loans and other sources of capital  Keep abreast of current technology  Brainstorming and research  Restructure debt analysis  Prepackage Interview Process for SBA Loans  Turnaround Advising Follow these steps to meet with a business advisor Step 1 Fill out/ download the following forms. Start-up Business Assessment Existing Business Assessment Fill out the Form 641/Client Agreement Step 2: You will be contacted by our office to direct you to the appropriate resource.'\"},{\"1\":\"https://tylersbdc.com/classes\",\"2\":\"Classes | Tyler Small Business Development Center Follow Us x a ! 903-510-2975 Directions How to Start a Business and Market lt on Social Media Tyler SBDC offers a low-cost monthly class for individuals interested in starting a small business. This single-session class provides an excellent opportunity for individuals to determine if small business ownership is right for them. This class also covers current social media trends and how to use platforms such as Instagram, Facebook, YouTube, and more to market their new business. This class is held on Tuesdays as follows: Tuesday 6/6 6-8 pm Tuesday 7/11 6-8 pm Tuesday 8/1 6-8 pm Location: RTDC 112 Registration Fee: $25 Call TJC School of Continuing Studies at 903-510-2900 to register and pay Contact Us'\"},{\"1\":\"https://tylersbdc.com/contact-us\",\"2\":\"Contact Us | Tyler Small Business Development Center Follow Us x a ! 903-510-2975 Directions Tyler Small Business Development Center 1530 SSW Loop 323 Suite 100 Tyler, TX 75701 GET DIRECTIONS Call Us Phone: 903-510-2975 Hours Mon: 8:00AM-5:00PM Tue: 8:00AM-5:00PM Wed: 8:00AM-5:00PM Thu: 8:00AM-5:00PM Fri: 8:00AM-5:00PM Sat: Closed Sun: Closed Email Us Thank you for visiting our website. Please fill out the following form to send us a message. Please click on the \\\"SUBMIT\\\" button when you are ready to send your message. You may use this form to request more information about our services, and to provide feedback about this website. We look forward to hearing from you!'\"},{\"1\":\"https://tylersbdc.com/events\",\"2\":\"Events | Tyler Small Business Development Center Follow Us x a ! Home Services Business Advice Classes FAQs Events Success Stories About Us Blog SizeUp Contact Us 903-510-2975 Directions Check Back Soon! Home Services Business Advice Classes FAQs Events Success Stories About Us Blog SizeUp Contact Us Copyright  2023 Tyler Small Business Development Center, all rights reserved. 1530 SSW Loop 323, Ste 100, Tyler , TX 75701 (903) 510-2975'\"},{\"1\":\"https://tylersbdc.com/faqs\",\"2\":\"FAQs | Tyler Small Business Development Center Follow Us x a ! 903-510-2975 Directions Frequently Asked Questions Are there any grants available to start a business? The SBA does not offer grants to start or expand small businesses, although it does offer a wide variety of loan programs. SBA does offer some grant programs, but these generally support non-profit organizations, intermediary lending institutions, and state and local governments. Click here for more information > What is a business plan and why do I need one? A business plan is a road map for the direction of your company and specifically defines your business and clearly states your goals. In addition, a good business plan is a crucial part of any loan package because it provides specific and organized information about your company and how you will repay borrowed money. Click here for more information > What types of permits and licenses are generally needed for starting a business? In addition to local permits and licenses which may be required, some businesses require specific licenses from the State of Texas. For a complete list of Business Licenses and Permits required for each type of business Click Here > Do I need a Federal Employer Identification Number (EIN) or tax number? In some cases, some sole proprietors with no employees and no sales tax can simply use their own social security number for tax purposes, but most businesses will need an EIN. You can apply by phone, fax, or mail. Click here for an SS-4 Form > Who is required to hold a Texas sales & use tax permit, and how do I get one? You must obtain a permit if you are engaged in business in Texas and you sell tangible personal property in Texas; lease tangible property in Texas; or sell taxable services in Texas. For more information on obtaining a permit from the Texas Comptroller of Public Accounts Click Here >'\"},{\"1\":\"https://tylersbdc.com/resource\",\"2\":\"Resource | Tyler Small Business Development Center Follow Us x a ! Home Services Business Advice Classes FAQs Events Success Stories About Us Blog SizeUp Contact Us 903-510-2975 Directions Tyler SBDC Services Research Capabilities Research Databases Available for Clients:  IBISWorld  BizMiner  Reference USA  Demographics Now Contact Kay Bookout for information. Contact Us Home Services Business Advice Classes FAQs Events Success Stories About Us Blog SizeUp Contact Us Copyright  2023 Tyler Small Business Development Center, all rights reserved. 1530 SSW Loop 323, Ste 100, Tyler , TX 75701 (903) 510-2975'\"},{\"1\":\"https://tylersbdc.com/sizeup\",\"2\":\"SizeUp | Tyler Small Business Development Center Follow Us x a ! Home Services Business Advice Classes FAQs Events Success Stories About Us Blog SizeUp Contact Us 903-510-2975 Directions Home Services Business Advice Classes FAQs Events Success Stories About Us Blog SizeUp Contact Us Copyright  2023 Tyler Small Business Development Center, all rights reserved. 1530 SSW Loop 323, Ste 100, Tyler , TX 75701 (903) 510-2975'\"},{\"1\":\"https://tylersbdc.com/success-stories\",\"2\":\"Success Stories | Tyler Small Business Development Center Follow Us x a ! 903-510-2975 Directions U.S. Small Business Administration Dallas/Fort Worth District Small Business Person(s) of the Year 2020 Stitchin' Heaven In 1996, Deb Luttrell opened a small quilt shop in Quitman, Texas called Stitchin' Heaven. In 2016, Deb's son, Clay Luttrell joined her to help manage the company's tremendous growth. What began as a small quilt shop is now the largest quilt shop in Texas encompassing a 17,500 sq. ft. retail shop, a retreat center, and rental cottages. The company also offers training classes, Bernina sewing machines, and travel excursions including Quilt Cruises and land-based Quilting Events in such places as Orlando, Nashville, Fort Worth, San Diego, and Las Vegas.\\\"\"},{\"1\":\"https://tylersbdc.com/web\",\"2\":\"Tyler Small Business Development Center | Tyler, TX Follow Us x a ! 903-510-2975 Directions Contact us to get the leverage your business needs today Fill out our assessment and get started today! We Are Now Open Contact Us X Want to stay in the know? Join our mailing list to receive emails with helpful resources and information on our upcoming events! Continue to Website Join Our Mailing List Free Business Advising Business Classes Tyler SBDC We're all about business on all levels. Whether you are an existing business in need of expansion and further development, additional training, or research capabilities; or a start-up in need of a business plan and preparation of paperwork for SBA loan lenders in your area, we can help you plan and prepare. The Tyler SBDC is a partnership program working with the U.S. Small Business Administration (SBA), the State of Texas, and Tyler Junior College to provide small businesses with the practical assistance needed to survive, grow, and prosper in our seven county service area of Smith, Wood, Cherokee, Nacogdoches, Shelby, Sabine, and San Augustine. Contact Us Join Our Mailing List Start-up Business Assessment Existing Business Assessment SizeUp 2022 Small Business Credit Survey\\\"\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[2]},\"rows\":{\"min\":[5],\"max\":[5]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nYou can see text scraped from one page in more detail by expanding the code chunk below:\n\n\n::: {.cell}\n\n```{.python .cell-code .code-overflow-wrap  code-fold=\"true\"}\n# example_text = \"Business Advice | Tyler Small Business Development Center Follow Us x a ! 903-510-2975 Directions Business Advising The SBDC offers free one-on-one advising for start-up and existing businesses in the retail, wholesale, manufacturing, and service industries. Our Advisors can help you. Prepare financial projections for loan package. Conduct financial analysis and improve profitability Develop competitive strategies  Cope with government regulation and taxes Design a marketing plan Understand and secure loans and other sources of capital Keep abreast of current technology Brainstorming and research Restructure debt analysis Prepackage Interview Process for SBA Loans Turnaround Advising Follow these steps to meet with a business advisor Step 1 Fill out/ download the following forms. Start-up Business Assessment Existing Business Assessment Fill out the Form 641/Client Agreement Step 2: You will be contacted by our office to direct you to the appropriate resource.  How to Start a Business and Market lt on Social Media Tyler SBDC offers a low-cost monthly class for individuals interested in starting a small business. This single-session class provides an excellent opportunity for individuals to determine if small business ownership is right for them. This class also covers current social media trends and how to use platforms such as Instagram, Facebook, YouTube, and more to market their new business. This class is held on Tuesdays as follows: Tuesday 6/6 6-8 pm Tuesday 7/11 6-8 pm Tuesday 8/1 6-8 pm Location: RTDC 112 Registration Fee: $25 Call TJC School of Continuing Studies at 903-510-2900 to register and pay Contact Us\"\n```\n:::\n\n\n### Embedding\n\n#### Estimating Cost and Resources\n\nFirst, we estimate how much of our 8194 token limit will be used by this text using the `tiktoken` library ([Github](https://github.com/openai/tiktoken \"Tiktoken Github Link\")). `tiktoken` is a open-source byte pair encoding ([BPE](https://www.geeksforgeeks.org/byte-pair-encoding-bpe-in-nlp/#:~:text=Byte%2DPair%20Encoding%20(BPE)%20is%20a%20compression%20algorithm%20used,text%20classification%2C%20and%20text%20generation.)) tokenizer. You can use this approximate how many tokens you'll send to the Chat-GPT API. The example text uses about 329 tokens.\n\n\n::: {.cell}\n\n```{.python .cell-code}\nimport tiktoken \ntokenizer = tiktoken.get_encoding(\"cl100k_base\")\n\ndf['n_tokens'] = df['text'].apply(lambda x: len(tokenizer.encode(x)))\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"url\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"n_tokens\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"text\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"https://tylersbdc.com/\",\"2\":\"248\",\"3\":\"Tyler Small Business Development Center | Tyler, TX Follow Us x a ! 903-510-2975 Directions Contact us to get the leverage your business needs today Fill out our assessment and get started today! We Are Now Open Contact Us X Want to stay in the know? Join our mailing list to receive emails with helpful resources and information on our upcoming events! Continue to Website Join Our Mailing List Free Business Advising Business Classes Tyler SBDC We're all about business on all levels. Whether you are an existing business in need of expansion and further development, additional training, or research capabilities; or a start-up in need of a business plan and preparation of paperwork for SBA loan lenders in your area, we can help you plan and prepare. The Tyler SBDC is a partnership program working with the U.S. Small Business Administration (SBA), the State of Texas, and Tyler Junior College to provide small businesses with the practical assistance needed to survive, grow, and prosper in our seven county service area of Smith, Wood, Cherokee, Nacogdoches, Shelby, Sabine, and San Augustine. Contact Us Join Our Mailing List Start-up Business Assessment Existing Business Assessment SizeUp 2022 Small Business Credit Survey\\\"\"},{\"1\":\"https://tylersbdc.com/about-us\",\"2\":\"293\",\"3\":\"About Us | Tyler Small Business Development Center Follow Us x a ! 903-510-2975 Directions Who We Are The SBDC is a partnership program with the U.S. Small Business Administration. The SBDC is designed to provide small businesses with the practical assistance needed to survive, grow, and prosper. The SBDC program is part of a nationwide system that links the resources of federal, state, and local government to those of colleges, universities, and the private sector to meet the specialized needs of small businesses. Advising and other services are provided by qualified professionals. Don Proudfoot SBDC Director Kay Bookout SBDC Staff Coordinator/Research Assistant Brad Gottshalk Business Advisor Where We Serve County Service Area How We Can Help You In your first meeting, a counselor will make an assessment of your needs and discuss options available to meet those needs. Further discussion and/or on-site visits by the adviser help define your plans and pinpoint a strategy to achieve them. For your appointment or research request, please download & fill out the required forms below as well as taking the Assessment Survey to save valuable time during your appointment. Form 641/Counseling Form & Client Agreement Return forms via email to kboo@tjc.edu, or fax to 903-510-2978. Reasonable accommodations for persons with disabilities and Limited English Proficiency (LEP) will be made if requested at least two weeks in advance. Start-up Business Assessment Existing Business Assessment'\"},{\"1\":\"https://tylersbdc.com/blog\",\"2\":\"114\",\"3\":\"Blog | Tyler Small Business Development Center Follow Us x a ! Home Services Business Advice Classes FAQs Events Success Stories About Us Blog SizeUp Contact Us 903-510-2975 Directions U.S. Small Business Administration Blog Click the photo to stay up to date on the latest information Home Services Business Advice Classes FAQs Events Success Stories About Us Blog SizeUp Contact Us Copyright  2023 Tyler Small Business Development Center, all rights reserved. 1530 SSW Loop 323, Ste 100, Tyler , TX 75701 (903) 510-2975'\"},{\"1\":\"https://tylersbdc.com/business-advice\",\"2\":\"185\",\"3\":\"Business Advice | Tyler Small Business Development Center Follow Us x a ! 903-510-2975 Directions Business Advising The SBDC offers free one-on-one advising for start-up and existing businesses in the retail, wholesale, manufacturing, and service industries. Our Advisors can help you  Prepare financial projections for loan package  Conduct financial analysis and improve profitability  Develop competitive strategies  Cope with government regulation and taxes  Design a marketing plan  Understand and secure loans and other sources of capital  Keep abreast of current technology  Brainstorming and research  Restructure debt analysis  Prepackage Interview Process for SBA Loans  Turnaround Advising Follow these steps to meet with a business advisor Step 1 Fill out/ download the following forms. Start-up Business Assessment Existing Business Assessment Fill out the Form 641/Client Agreement Step 2: You will be contacted by our office to direct you to the appropriate resource.'\"},{\"1\":\"https://tylersbdc.com/classes\",\"2\":\"172\",\"3\":\"Classes | Tyler Small Business Development Center Follow Us x a ! 903-510-2975 Directions How to Start a Business and Market lt on Social Media Tyler SBDC offers a low-cost monthly class for individuals interested in starting a small business. This single-session class provides an excellent opportunity for individuals to determine if small business ownership is right for them. This class also covers current social media trends and how to use platforms such as Instagram, Facebook, YouTube, and more to market their new business. This class is held on Tuesdays as follows: Tuesday 6/6 6-8 pm Tuesday 7/11 6-8 pm Tuesday 8/1 6-8 pm Location: RTDC 112 Registration Fee: $25 Call TJC School of Continuing Studies at 903-510-2900 to register and pay Contact Us'\"},{\"1\":\"https://tylersbdc.com/contact-us\",\"2\":\"193\",\"3\":\"Contact Us | Tyler Small Business Development Center Follow Us x a ! 903-510-2975 Directions Tyler Small Business Development Center 1530 SSW Loop 323 Suite 100 Tyler, TX 75701 GET DIRECTIONS Call Us Phone: 903-510-2975 Hours Mon: 8:00AM-5:00PM Tue: 8:00AM-5:00PM Wed: 8:00AM-5:00PM Thu: 8:00AM-5:00PM Fri: 8:00AM-5:00PM Sat: Closed Sun: Closed Email Us Thank you for visiting our website. Please fill out the following form to send us a message. Please click on the \\\"SUBMIT\\\" button when you are ready to send your message. You may use this form to request more information about our services, and to provide feedback about this website. We look forward to hearing from you!'\"},{\"1\":\"https://tylersbdc.com/events\",\"2\":\"99\",\"3\":\"Events | Tyler Small Business Development Center Follow Us x a ! Home Services Business Advice Classes FAQs Events Success Stories About Us Blog SizeUp Contact Us 903-510-2975 Directions Check Back Soon! Home Services Business Advice Classes FAQs Events Success Stories About Us Blog SizeUp Contact Us Copyright  2023 Tyler Small Business Development Center, all rights reserved. 1530 SSW Loop 323, Ste 100, Tyler , TX 75701 (903) 510-2975'\"},{\"1\":\"https://tylersbdc.com/faqs\",\"2\":\"370\",\"3\":\"FAQs | Tyler Small Business Development Center Follow Us x a ! 903-510-2975 Directions Frequently Asked Questions Are there any grants available to start a business? The SBA does not offer grants to start or expand small businesses, although it does offer a wide variety of loan programs. SBA does offer some grant programs, but these generally support non-profit organizations, intermediary lending institutions, and state and local governments. Click here for more information > What is a business plan and why do I need one? A business plan is a road map for the direction of your company and specifically defines your business and clearly states your goals. In addition, a good business plan is a crucial part of any loan package because it provides specific and organized information about your company and how you will repay borrowed money. Click here for more information > What types of permits and licenses are generally needed for starting a business? In addition to local permits and licenses which may be required, some businesses require specific licenses from the State of Texas. For a complete list of Business Licenses and Permits required for each type of business Click Here > Do I need a Federal Employer Identification Number (EIN) or tax number? In some cases, some sole proprietors with no employees and no sales tax can simply use their own social security number for tax purposes, but most businesses will need an EIN. You can apply by phone, fax, or mail. Click here for an SS-4 Form > Who is required to hold a Texas sales & use tax permit, and how do I get one? You must obtain a permit if you are engaged in business in Texas and you sell tangible personal property in Texas; lease tangible property in Texas; or sell taxable services in Texas. For more information on obtaining a permit from the Texas Comptroller of Public Accounts Click Here >'\"},{\"1\":\"https://tylersbdc.com/resource\",\"2\":\"133\",\"3\":\"Resource | Tyler Small Business Development Center Follow Us x a ! Home Services Business Advice Classes FAQs Events Success Stories About Us Blog SizeUp Contact Us 903-510-2975 Directions Tyler SBDC Services Research Capabilities Research Databases Available for Clients:  IBISWorld  BizMiner  Reference USA  Demographics Now Contact Kay Bookout for information. Contact Us Home Services Business Advice Classes FAQs Events Success Stories About Us Blog SizeUp Contact Us Copyright  2023 Tyler Small Business Development Center, all rights reserved. 1530 SSW Loop 323, Ste 100, Tyler , TX 75701 (903) 510-2975'\"},{\"1\":\"https://tylersbdc.com/sizeup\",\"2\":\"96\",\"3\":\"SizeUp | Tyler Small Business Development Center Follow Us x a ! Home Services Business Advice Classes FAQs Events Success Stories About Us Blog SizeUp Contact Us 903-510-2975 Directions Home Services Business Advice Classes FAQs Events Success Stories About Us Blog SizeUp Contact Us Copyright  2023 Tyler Small Business Development Center, all rights reserved. 1530 SSW Loop 323, Ste 100, Tyler , TX 75701 (903) 510-2975'\"},{\"1\":\"https://tylersbdc.com/success-stories\",\"2\":\"182\",\"3\":\"Success Stories | Tyler Small Business Development Center Follow Us x a ! 903-510-2975 Directions U.S. Small Business Administration Dallas/Fort Worth District Small Business Person(s) of the Year 2020 Stitchin' Heaven In 1996, Deb Luttrell opened a small quilt shop in Quitman, Texas called Stitchin' Heaven. In 2016, Deb's son, Clay Luttrell joined her to help manage the company's tremendous growth. What began as a small quilt shop is now the largest quilt shop in Texas encompassing a 17,500 sq. ft. retail shop, a retreat center, and rental cottages. The company also offers training classes, Bernina sewing machines, and travel excursions including Quilt Cruises and land-based Quilting Events in such places as Orlando, Nashville, Fort Worth, San Diego, and Las Vegas.\\\"\"},{\"1\":\"https://tylersbdc.com/web\",\"2\":\"248\",\"3\":\"Tyler Small Business Development Center | Tyler, TX Follow Us x a ! 903-510-2975 Directions Contact us to get the leverage your business needs today Fill out our assessment and get started today! We Are Now Open Contact Us X Want to stay in the know? Join our mailing list to receive emails with helpful resources and information on our upcoming events! Continue to Website Join Our Mailing List Free Business Advising Business Classes Tyler SBDC We're all about business on all levels. Whether you are an existing business in need of expansion and further development, additional training, or research capabilities; or a start-up in need of a business plan and preparation of paperwork for SBA loan lenders in your area, we can help you plan and prepare. The Tyler SBDC is a partnership program working with the U.S. Small Business Administration (SBA), the State of Texas, and Tyler Junior College to provide small businesses with the practical assistance needed to survive, grow, and prosper in our seven county service area of Smith, Wood, Cherokee, Nacogdoches, Shelby, Sabine, and San Augustine. Contact Us Join Our Mailing List Start-up Business Assessment Existing Business Assessment SizeUp 2022 Small Business Credit Survey\\\"\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n### Embedding Text\n\nNote: You'll need to make an access key for OpenAI to run any of the code in this section\n\nThen we create embeddings for each page using the OpenAI API. Embeddings translate text into numeric vectors. When two vector embeddings are close to each other (low distance), we expect the text to be similar in meaning. OpenAI offers a number of [embedding models](https://platform.openai.com/docs/guides/embeddings \"OpenAI embeddings\") for users to choose from. At the time of writing this, `text-embedding-ada-002` is is the cheapest option and [outperforms the other models](https://openai.com/blog/new-and-improved-embedding-model \"Comparing OpenAI embedding models\").\n\nBelow is example code (not run), to show how to use OpenAI embedding models. (I didn't want to pay for any more uses of the OpenAI API or host a reproducible example on this site. )\n\n\n::: {.cell}\n\n```{.python .cell-code .code-overflow-wrap}\nimport tiktoken \nfrom openai import Embedding\n\ndf[\"embeddings\"] = df[\"text\"].apply(lambda x: Embedding.create(input=x,model=\"text-embedding-ada-002\",temperature=0.25)[\"data\"][0][\"embedding\"])\n```\n:::\n\n::: {.cell}\n\n:::\n\n\n## Informational Retrieval\n\nWe'll use the following query:\n\n\n::: {.cell}\n\n```{.python .cell-code .code-overflow-wrap}\nquery = f\"Provide a list of help, resources, or services offered by {sbdc_name}. Each list item should begin with a dash and end with a newline. Summarize each list item into at most 2 to 4 words.\"\n```\n:::\n\n\nWe embed the query then compare the distance between it and each webpage's text. We rank the text by most relevant to our query to least relevant.\n\nExample code:\n\n\n::: {.cell}\n\n```{.python .cell-code .code-overflow-wrap}\nfrom numpy import dot\nfrom numpy.linalg import norm\n\ndef cos_dist(a, b):\n  1 - dot(a, b)/(norm(a) * norm(b))\n  \nq_embedding = Embedding.create(input=question, engine=\"text-embedding-ada-002\")[\"data\"][0][\"embedding\"]\n\n# Get the distance between the query and each embedded website text\ndf[\"distances\"] = [cos_dist(q_embedding, embedding) for embedding in df[\"embeddings\"]]\n  \n# Smallest distance means more relevant\ndf[\"distances\"] = df.sort_values(\"distances\", ascending=True)\n```\n:::\n\n\nThis is an example of what we would see at this point.\n\n| **Relevance** | **Website**     | **distancse** | **n_tokens** | **Cumulative Tokens Used** |\n|---------------|---------------|---------------|---------------|---------------|\n| 1             | Resources       | 0.158        | 459        | 459                        |\n| 2             | Business Advice | 0.16         | 358        | 817                        |\n| 3             | About SBDC      | 0.173        | 380        | 1197                       |\n| 4             | About Us        | 0.173        | 381        | 1578                       |\n| 5             | Stories         | 0.18         | 342        | 1920                       |\n| 6             | Who We Are      | 0.189        | 652        | 2572                       |\n| 7             | Events          | 0.194        | 577        | 3149                       |\n\nWe append the most relevant text until we hit our GPT-4 API character limit\n\n\n::: {.cell}\n\n```{.python .cell-code}\ncontext = []\ncur_len = 0\nmax_len = 3000\n\n# Sort by distance and add the text to the context until the context is too long\nfor i, row in df.sort_values(\"distances\", ascending=True).iterrows():\n  # Add the length of the text to the current length plus some padding for separators\n  cur_len += row[\"n_tokens\"] + 4\n  \n  # If the context is too long, break\n  if cur_len > max_len:\n    break\n  \n  # Else add it to the text that is being returned\n  context.append(row[\"text\"])\n  \n  # Return the context\n  return \"\\n\\n###\\n\\n\".join(context)\n```\n:::\n\n\n## Prompting GPT-4 With Context\n\nFinally, we submit our query to GPT-4 along with the context we've found in the previous steps.\n\n\n::: {.cell}\n\n```{.python .cell-code}\nresponse = openai.ChatCompletion.create(\n            messages=[\n                {\n                    \"role\": \"system\",\n                    \"content\": \"You are a web scraping assistant. Answer the user's questions based\"\n                    + \"on the context below. If the question can't be answered based on the context,\"\n                    + f'say \"I don\\'t know\"\\n\\nContext: {context}',\n                },\n                {\n                    \"role\": \"user\",\n                    \"content\": question_context.question,\n                },\n            ],\n            temperature=0.15,\n            top_p=1,\n            frequency_penalty=0,\n            presence_penalty=0,\n            stop=stop_sequence,\n            model=model,\n        )\nresponse[\"choices\"][0][\"message\"][\"content\"]\n```\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n\n- Business Advising\n- Business Classes\n- Start-up Assistance\n- Existing Business Development\n- Training Programs\n- Research Capabilities\n- Business Plan Preparation\n- SBA Loan Paperwork Preparation\n- Practical Business Assistance\n- Mailing List with Resources and Information\n- Start-up Business Assessment\n- Existing Business Assessment\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}